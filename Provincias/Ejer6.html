<!DOCTYPE html>
<html>
  <head>
    <style>
      .dropdown-content {
          display: none;
          position: absolute;
          min-width: 160px;
          overflow: auto;
          z-index: 1;
      }
      .dropdown-content a {
          color: black;
          padding: 12px 16px;
          text-decoration: none;
          display: block;
      }
      .dropdown a:hover {background-color: #ddd}
      .show {display:block;}
      #datos {
        text-align: center;
      }
      </style>
  </head>
  <body>
     <input id="inputCP" type="text" maxlength="5"></input>
     <button id="enviarCP" type="button" onclick="comprobarCP()">Comprobar CP</button>
     <div id="datos">
     </div>

    <script>
      function comprobarCP(cp){
        var valorCP = document.getElementById("inputCP").value.substring(0,2);
        var valorCPEntero = document.getElementById("inputCP").value;
        var arrayNombres;
        var arrayCP;
        switch (valorCP) {
          case "21":mostrarMunicipioHuelva(valorCPEntero);break;
          case "41":mostrarMunicipioSevilla(valorCPEntero);break;
          case "11":mostrarMunicipioCadiz(valorCPEntero);break;
          case "29":mostrarMunicipioMalaga(valorCPEntero);break;
          case "23":mostrarMunicipioJaen(valorCPEntero);break;
          case "14":mostrarMunicipioCordoba(valorCPEntero);break;
          case "18":mostrarMunicipioGranada(valorCPEntero);break;
          case "04":mostrarMunicipioAlmeria(valorCPEntero);break;
        }
      }
      function mostrarMunicipioHuelva(valorCPEntero) {
        limpiar();
        var arrayNombres = new Array();
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var arraySplit = this.responseText.split("&");
            for (var i = 0; i < arraySplit.length; i++) {
              var aux = arraySplit[i].split(":");
              if(aux[0]==valorCPEntero){
                var parrafo = document.createElement("p");
                var contenido = document.createTextNode(aux[1]);
                parrafo.appendChild(contenido);
                document.getElementById("datos").appendChild(contenido);
              }
            }
          }
        };
        xhttp.open("GET", "huelva.txt", true);
        xhttp.send();
      }
      function mostrarMunicipioSevilla(valorCPEntero) {
        limpiar();
        var arrayNombres = new Array();
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var arraySplit = this.responseText.split("&");
            for (var i = 0; i < arraySplit.length; i++) {
              var aux = arraySplit[i].split(":");
              if(aux[0]==valorCPEntero){
                var parrafo = document.createElement("p");
                var contenido = document.createTextNode(aux[1]);
                parrafo.appendChild(contenido);
                document.getElementById("datos").appendChild(contenido);
              }
            }
          }
        };
        xhttp.open("GET", "sevilla.txt", true);
        xhttp.send();
      }
      function mostrarMunicipioCadiz(valorCPEntero) {
        limpiar();
        var arrayNombres = new Array();
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var arraySplit = this.responseText.split("&");
            for (var i = 0; i < arraySplit.length; i++) {
              var aux = arraySplit[i].split(":");
              if(aux[0]==valorCPEntero){
                var parrafo = document.createElement("p");
                var contenido = document.createTextNode(aux[1]);
                parrafo.appendChild(contenido);
                document.getElementById("datos").appendChild(contenido);
              }
            }
          }
        };
        xhttp.open("GET", "cadiz.txt", true);
        xhttp.send();
      }
      function mostrarMunicipioMalaga(valorCPEntero) {
        limpiar();
        var arrayNombres = new Array();
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var arraySplit = this.responseText.split("&");
            for (var i = 0; i < arraySplit.length; i++) {
              var aux = arraySplit[i].split(":");
              if(aux[0]==valorCPEntero){
                var parrafo = document.createElement("p");
                var contenido = document.createTextNode(aux[1]);
                parrafo.appendChild(contenido);
                document.getElementById("datos").appendChild(contenido);
              }
            }
          }
        };
        xhttp.open("GET", "malaga.txt", true);
        xhttp.send();
      }
      function mostrarMunicipioJaen(valorCPEntero) {
        limpiar();
        var arrayNombres = new Array();
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var arraySplit = this.responseText.split("&");
            for (var i = 0; i < arraySplit.length; i++) {
              var aux = arraySplit[i].split(":");
              if(aux[0]==valorCPEntero){
                var parrafo = document.createElement("p");
                var contenido = document.createTextNode(aux[1]);
                parrafo.appendChild(contenido);
                document.getElementById("datos").appendChild(contenido);
              }
            }
          }
        };
        xhttp.open("GET", "jaen.txt", true);
        xhttp.send();
      }
      function mostrarMunicipioCordoba(valorCPEntero) {
        limpiar();
        var arrayNombres = new Array();
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var arraySplit = this.responseText.split("&");
            for (var i = 0; i < arraySplit.length; i++) {
              var aux = arraySplit[i].split(":");
              if(aux[0]==valorCPEntero){
                var parrafo = document.createElement("p");
                var contenido = document.createTextNode(aux[1]);
                parrafo.appendChild(contenido);
                document.getElementById("datos").appendChild(contenido);
              }
            }
          }
        };
        xhttp.open("GET", "cordoba.txt", true);
        xhttp.send();
      }
      function mostrarMunicipioGranada(valorCPEntero) {
        limpiar();
        var arrayNombres = new Array();
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var arraySplit = this.responseText.split("&");
            for (var i = 0; i < arraySplit.length; i++) {
              var aux = arraySplit[i].split(":");
              if(aux[0]==valorCPEntero){
                var parrafo = document.createElement("p");
                var contenido = document.createTextNode(aux[1]);
                parrafo.appendChild(contenido);
                document.getElementById("datos").appendChild(contenido);
              }
            }
          }
        };
        xhttp.open("GET", "granada.txt", true);
        xhttp.send();
      }
      function mostrarMunicipioAlmeria(valorCPEntero) {
        limpiar();
        var arrayNombres = new Array();
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var arraySplit = this.responseText.split("&");
            for (var i = 0; i < arraySplit.length; i++) {
              var aux = arraySplit[i].split(":");
              if(aux[0]==valorCPEntero){
                var parrafo = document.createElement("p");
                var contenido = document.createTextNode(aux[1]);
                parrafo.appendChild(contenido);
                document.getElementById("datos").appendChild(contenido);
              }
            }
          }
        };
        xhttp.open("GET", "almeria.txt", true);
        xhttp.send();
      }
      function limpiar(){
        var d= document.getElementById("datos");
        while(d.hasChildNodes())
        d.removeChild(d.firstChild);
      }
    </script>

  </body>
</html>
